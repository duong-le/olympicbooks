<nz-card class="container">
  <div nz-row [nzGutter]="[48,32]">
    <div nz-col nzLg="12" nzXs="24">
      <nz-carousel [nzEnableSwipe]="true" [nzAutoPlay]="true">
        <div nz-carousel-content *ngFor="let image of product?.images">
          <img class="product-image" [src]="image.url" (load)="onLoadImage($event)">
        </div>
      </nz-carousel>
    </div>

    <div nz-col nzLg="12" nzXs="24">
      <nz-skeleton [nzLoading]="isProductLoading" [nzActive]="true" [nzParagraph]="{ rows: 15 }">
        <div>
          <!-- <div class="badge item-new" *ngIf="product.new">New</div> -->
          <span class="title">{{ product?.title }}</span>
        </div>

        <nz-divider></nz-divider>

        <nz-descriptions [nzColumn]="3" [nzColon]="false">
          <nz-descriptions-item>
            <nz-statistic [nzValue]="4.8 | number" nzSuffix="/ 5" nzTitle="Đánh Giá"></nz-statistic>
          </nz-descriptions-item>
          <nz-descriptions-item>
            <nz-statistic [nzValue]="36 | number" nzTitle="Đã Bán"></nz-statistic>
          </nz-descriptions-item>
          <nz-descriptions-item>
            <nz-statistic [nzValue]="11 | number" nzTitle="Nhận xét"></nz-statistic>
          </nz-descriptions-item>
        </nz-descriptions>

        <div class="price-wrapper">
          <h1 class="price">{{ product?.price | price }}</h1>
          <h3 *ngIf="product?.price !== product?.originalPrice">
            <del>{{ product?.originalPrice | price }}</del></h3>
        </div>

        <nz-divider></nz-divider>

        <ng-container *ngIf="product?.stock; else outOfStock">
          <nz-descriptions [nzColumn]="2" [nzColon]="false">
            <nz-descriptions-item nzTitle="Số lượng"></nz-descriptions-item>
            <nz-descriptions-item>
              <nz-input-number [(ngModel)]="quantity" [nzMin]="minQty" [nzMax]="maxQty" [nzStep]="1"></nz-input-number>
            </nz-descriptions-item>
          </nz-descriptions>

          <button nz-button nzType="dashed" nzBlock>
            <a href="tel:0984803198"><i nz-icon nzType="phone"></i> 0984.803.198</a></button>
          <button nz-button nzType="default" nzBlock [nzLoading]="isBtnLoading.addToCart"
            (click)="addItemToCart('addToCart')" [disabled]="isBtnLoading.buyNow">Thêm Vào Giỏ Hàng</button>
          <button nz-button nzType="primary" nzBlock [nzLoading]="isBtnLoading.buyNow" (click)="addItemToCart('buyNow')"
            [disabled]="isBtnLoading.addToCart">Mua Ngay</button>
        </ng-container>
        <ng-template #outOfStock>
          <button nz-button nzType="default" nzBlock disabled>Hết hàng</button>
          <button nz-button nzType="primary" nzBlock>
            <a href="tel:0984803198"><i nz-icon nzType="phone"></i> 0984.803.198</a></button>
        </ng-template>
      </nz-skeleton>
    </div>
  </div>
</nz-card>

<nz-card class="container" [nzLoading]="isProductLoading" nzTitle="Thông Tin Chi Tiết">
  <nz-descriptions nzBordered [nzColumn]="1" nzSize="middle">
    <nz-descriptions-item nzTitle="Nhà xuất bản">{{ product?.publisher.name }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="Tác giả">
      <ng-container *ngFor="let author of product?.authors">{{ author.name }} <br /></ng-container>
    </nz-descriptions-item>
    <nz-descriptions-item nzTitle="Năm xuất bản">{{ product?.publicationYear }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="Số trang">{{ product?.pages }}</nz-descriptions-item>
    <nz-descriptions-item nzTitle="Thể loại">{{ product?.category.title }}</nz-descriptions-item>
  </nz-descriptions>
</nz-card>

<nz-card class="container" [nzLoading]="isProductLoading" nzTitle="Mô Tả Sản Phẩm">
  <div [innerHTML]="product?.description"></div>
</nz-card>

<!-- <nz-card class="container" [nzLoading]="isProductLoading" nzTitle="Khách Hàng Nhận Xét">
  <nz-list *ngIf="commentData.length" [nzDataSource]="commentData" [nzRenderItem]="item" nzItemLayout="horizontal">
    <ng-template #item let-item>
      <nz-comment [nzAuthor]="commentator.author" [nzDatetime]="item.datetime">
        <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="commentator.avatar"></nz-avatar>
        <nz-comment-content>
          <p>{{ item.content }}</p>
        </nz-comment-content>
        <nz-comment-action>
          <i nz-icon nzType="like" [nzTheme]="likes > 0 ? 'twotone' : 'outline'" (click)="like()"></i>
          <span class="count like">{{ likes }}</span>
        </nz-comment-action>
      </nz-comment>
    </ng-template>
  </nz-list>

  <nz-comment>
    <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="commentator.avatar"></nz-avatar>
    <nz-comment-content>
      <nz-form-item>
        <textarea [(ngModel)]="commentValue" nz-input rows="4"></textarea>
      </nz-form-item>
      <nz-form-item>
        <button nz-button nzType="primary" [nzLoading]="isBtnLoading.comment" [disabled]="!commentValue" (click)="submitComment()">
          Thêm bình luận
        </button>
      </nz-form-item>
    </nz-comment-content>
  </nz-comment>
</nz-card> -->

<nz-card class="container" nzTitle="Sản Phẩm Liên Quan" [nzBodyStyle]="relatedProductStyle"
  [nzLoading]="isProductLoading || isRelatedProductsLoading">
  <div nz-row>
    <div nz-col class="ant-col-all" nzXl="4" nzLg="6" nzMd="8" nzSm="12" nzXs="24"
      *ngFor="let product of relatedProducts">
      <app-product [product]="product"></app-product>
    </div>
  </div>
</nz-card>