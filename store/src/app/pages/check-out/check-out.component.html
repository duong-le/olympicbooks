<div class="container" *ngIf="!success && !error">
  <div nz-row [nzGutter]="[16, 16]">
    <div nz-col nzXl="16" nzMd="12" nzXs="24">
      <div nz-row [nzGutter]="[0,16]">
        <div nz-col nzSpan="24">
          <nz-card [nzLoading]="loading" nzTitle="Địa chỉ giao hàng" [nzBordered]="false" [nzExtra]="editShippingAdd">
            <nz-descriptions [nzTitle]="user.name" [nzColumn]="1">
              <nz-descriptions-item nzTitle="Số điện thoại">{{ user.phone }}</nz-descriptions-item>
              <nz-descriptions-item nzTitle="Địa chỉ">{{ user.add }}</nz-descriptions-item>
            </nz-descriptions>
          </nz-card>
          <ng-template #editShippingAdd>
            <a nz-button nzType="link" (click)="showModal()"><i nz-icon nzType="edit" nzTheme="outline"></i> Thay
              đổi</a>
            <nz-modal nzTitle="Chỉnh sửa địa chỉ" [nzVisible]="isVisible" (nzOnCancel)="handleCancel()"
              (nzOnOk)="handleOk()">
              <form nz-form [formGroup]="addressForm">
                <nz-form-item>
                  <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name">Họ và tên</nz-form-label>
                  <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng điền họ và tên">
                    <input nz-input id="name" formControlName="name" />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="phone" nzRequired>Số điện thoại</nz-form-label>
                  <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng điền số điện thoại">
                    <input nz-input id="phone" formControlName="phone" />
                  </nz-form-control>
                </nz-form-item>

                <nz-form-item>
                  <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="address" nzRequired>Địa chỉ</nz-form-label>
                  <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng điền địa chỉ">
                    <input nz-input id="address" formControlName="address" />
                  </nz-form-control>
                </nz-form-item>
              </form>
            </nz-modal>
          </ng-template>
        </div>

        <div nz-col nzSpan="24">
          <nz-card [nzLoading]="loading" nzTitle="Hình thức giao hàng" [nzBordered]="false">
            <nz-radio-group [(ngModel)]="radioValue">
              <label nz-radio nzValue="A">
                <nz-tag nzColor="success">Miễn phí</nz-tag>Giao hàng tiêu chuẩn
              </label>
              <label nz-radio nzValue="B">
                <nz-tag nzColor="warning">{{ 30000 | currency:"VND":"symbol":null:"vi-VN" }}</nz-tag>Giao hàng nhanh
              </label>
            </nz-radio-group>
          </nz-card>
        </div>

        <div nz-col nzSpan="24">
          <nz-card [nzLoading]="loading" nzTitle="Hình thức thanh toán" [nzBordered]="false">
            <nz-radio-group [(ngModel)]="radioValue">
              <label nz-radio nzValue="A">Thanh toán tiền mặt khi nhận hàng</label>
              <label nz-radio nzValue="B" nzDisabled="true">Thanh toán bằng thẻ quốc tế Visa, Master</label>
              <label nz-radio nzValue="C" nzDisabled="true">Thanh toán bằng thẻ ATM nội địa/Internet Banking</label>
              <label nz-radio nzValue="D" nzDisabled="true">Thanh toán bằng ví Momo</label>
            </nz-radio-group>
          </nz-card>
        </div>
      </div>
    </div>

    <div nz-col nzXl="8" nzMd="12" nzXs="24">
      <div nz-row [nzGutter]="[0,16]">
        <div nz-col nzSpan="24">
          <nz-card [nzLoading]="loading" nzTitle="Sản phẩm" [nzBordered]="false" [nzExtra]="editOrder">
            <div class="item-wrapper" *ngFor="let item of items">
              <div class="item-head">
                <a routerLink="/products/1" class="item-img"> <img [src]="item.src"></a>
                <div class="item-main">
                  <a routerLink="/products/1">
                    <h4>{{ item.name }}</h4>
                  </a>
                  <span>Số lượng: {{ item.quantity }}</span>
                </div>
              </div>
              <div class="price">{{ item.price | currency:"VND":"symbol":null:"vi-VN" }}</div>
            </div>
          </nz-card>
          <ng-template #editOrder>
            <a routerLink="/cart"><i nz-icon nzType="edit" nzTheme="outline"></i> Thay đổi</a>
          </ng-template>
        </div>

        <div nz-col nzSpan="24">
          <nz-card [nzLoading]="loading" nzTitle="Đơn hàng" [nzBordered]="false">
            <div nz-row nzJustify="space-between" class="summary-row">
              <div nz-col>
                <span>Tạm tính</span>
              </div>
              <div nz-col>
                <span class="summary-price price">{{ 1612378 | currency:"VND":"symbol":null:"vi-VN" }}</span>
              </div>
            </div>

            <div nz-row nzJustify="space-between" class="summary-row">
              <div nz-col>
                <span>Giảm giá</span>
              </div>
              <div nz-col>
                <span class="summary-price price">{{ 30000 | currency:"VND":"symbol":null:"vi-VN" }}</span>
              </div>
            </div>

            <div nz-row nzJustify="space-between" class="summary-row">
              <div nz-col>
                <span>Phí vận chuyển</span>
              </div>
              <div nz-col>
                <span class="summary-price price">{{ 30000 | currency:"VND":"symbol":null:"vi-VN" }}</span>
              </div>
            </div>

            <nz-divider></nz-divider>

            <div nz-row nzJustify="space-between" class="summary-row">
              <div nz-col>
                <span>Tổng cộng</span>
              </div>
              <div nz-col>
                <span class="summary-price price">{{ 1912378 | currency:"VND":"symbol":null:"vi-VN" }}</span>
              </div>
            </div>
            <button nz-button nzType="primary" (click)="processOrder()" [nzLoading]="isProcessingOrder" nzBlock>
              Đặt hàng</button>
          </nz-card>
        </div>
      </div>
    </div>
  </div>
</div>

<app-order-success *ngIf="success" [orderId]="'2020182818828182881'"></app-order-success>

<app-order-error *ngIf="error"></app-order-error>