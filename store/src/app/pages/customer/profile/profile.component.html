<nz-card nzTitle="Hồ sơ">
  <form nz-form [formGroup]="profileForm" (ngSubmit)="submitProfileForm()">
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="email">Email</nz-form-label>
      <nz-form-control [nzMd]="12" [nzSm]="14" [nzXs]="24">
        <input nz-input formControlName="email" id="email" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="name">Họ tên</nz-form-label>
      <nz-form-control [nzMd]="12" [nzSm]="14" [nzXs]="24" nzErrorTip="Tên phải chứa ít nhất 2 ký tự">
        <input nz-input formControlName="name" id="name" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="address">Địa chỉ</nz-form-label>
      <nz-form-control [nzMd]="12" [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng nhập địa chỉ">
        <input nz-input formControlName="address" id="address" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="phoneNumber">Số điện thoại</nz-form-label>
      <nz-form-control [nzMd]="12" [nzSm]="14" [nzXs]="24" nzErrorTip="Vui lòng nhập số điện thoại">
        <input nz-input formControlName="phoneNumber" id="phoneNumber" type="tel" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzMd]="{ offset: 8 }" [nzSm]="{ offset: 10 }">
        <button
          nz-button
          nzType="primary"
          [nzLoading]="isUpdateProfileLoading"
          [disabled]="profileForm.invalid || profileForm.pristine"
        >
          Cập nhật
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-card>

<nz-card nzTitle="Thay đổi mật khẩu">
  <form nz-form [formGroup]="passwordForm" (ngSubmit)="submitPasswordForm()">
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="password">Mật khẩu mới</nz-form-label>
      <nz-form-control
        [nzMd]="12"
        [nzSm]="14"
        [nzXs]="24"
        nzErrorTip="Mật khẩu phải chứa ít nhất 6 ký tự, bao gồm cả chữ thường, chữ hoa và ký tự đặc biệt"
      >
        <nz-input-group [nzSuffix]="suffixNewPassword">
          <input
            nz-input
            [type]="newPasswordVisible ? 'text' : 'password'"
            id="new-password"
            formControlName="password"
            (ngModelChange)="updateConfirmValidator()"
            autocomplete="new-password"
          />
        </nz-input-group>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="8" [nzSm]="10" [nzXs]="24" nzFor="confirmPassword"
        >Xác nhận mật khẩu</nz-form-label
      >
      <nz-form-control [nzMd]="12" [nzSm]="14" [nzXs]="24" [nzErrorTip]="errorTpl">
        <nz-input-group [nzSuffix]="suffixConfirmPassword">
          <input
            nz-input
            [type]="confirmPasswordVisible ? 'text' : 'password'"
            formControlName="confirmPassword"
            id="confirm-password"
          />
        </nz-input-group>
        <ng-template #errorTpl let-control>
          <ng-container *ngIf="control.hasError('required')"> Vui lòng xác nhận mật khẩu </ng-container>
          <ng-container *ngIf="control.hasError('confirm')"> Mật khẩu không khớp </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzMd]="{ offset: 8 }" [nzSm]="{ offset: 10 }">
        <button
          nz-button
          nzType="primary"
          [nzLoading]="isUpdatePasswordLoading"
          [disabled]="passwordForm.invalid || passwordForm.pristine"
        >
          Cập nhật
        </button>
      </nz-form-control>
    </nz-form-item>
  </form>
  <ng-template #suffixNewPassword>
    <i
      nz-icon
      [nzType]="newPasswordVisible ? 'eye-invisible' : 'eye'"
      (click)="newPasswordVisible = !newPasswordVisible"
    ></i>
  </ng-template>
  <ng-template #suffixConfirmPassword>
    <i
      nz-icon
      [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'"
      (click)="confirmPasswordVisible = !confirmPasswordVisible"
    ></i>
  </ng-template>
</nz-card>
