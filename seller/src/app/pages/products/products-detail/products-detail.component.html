<nz-card [nzLoading]="isLoading" [nzTitle]="title" [nzExtra]="buttonGroup">
  <form nz-form [formGroup]="productForm">
    <nz-form-item *ngIf="!isNew">
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="id" nzRequired>ID</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <input nz-input formControlName="id" type="text">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="title" nzRequired>Tên Sách</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="title" type="text">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="pages" nzRequired>Số trang</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="pages" type="number">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="weight" nzRequired>Cân nặng (grams)</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="weight" type="number">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="publicationYear" nzRequired>Năm xuất bản</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="publicationYear" type="number">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="price" nzRequired>Giá bán</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="price" type="number">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="originalPrice" nzRequired>Giá gốc</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <input nz-input formControlName="originalPrice" type="number">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="description" nzRequired>Mô tả sản phẩm</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <textarea nz-input [nzAutosize]="{ minRows: 3 }" formControlName="description"></textarea>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="inStock" nzRequired>Có hàng</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-switch formControlName="inStock"></nz-switch>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="categoryId" nzRequired>Danh mục</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24">
        <nz-tree-select [nzNodes]="categoryTree" nzShowSearch [nzHideUnMatched]="true" [nzDefaultExpandAll]="true"
                        [nzDropdownStyle]="{ 'max-height': '500px' }" formControlName="categoryId">
        </nz-tree-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="publisherId" nzRequired>Nhà xuất bản</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <nz-select nzShowSearch nzAllowClear formControlName="publisherId">
          <nz-option *ngFor="let publisher of publishers" [nzLabel]="publisher?.name" [nzValue]="publisher?.id">
          </nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzMd]="6" [nzSm]="8" [nzXs]="24" nzFor="authorId" nzRequired>Tác giả</nz-form-label>
      <nz-form-control [nzSm]="14" [nzXs]="24" nzErrorTip="Please input this field!">
        <nz-select nzShowSearch nzAllowClear nzMode="multiple" formControlName="authorIds">
          <nz-option *ngFor="let author of authors" [nzLabel]="author?.name" [nzValue]="author?.id">
          </nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
  </form>
  <div nz-row>
    <div nz-col [nzSpan]="14" [nzMd]="{ offset: 6 }" [nzSm]="{ offset: 8 }">
      <nz-upload [(nzFileList)]="fileList" nzListType="picture" [nzAccept]="fileTypeLimit" [nzFileType]="fileTypeLimit"
                 [nzSize]="fileSizeLimit" [nzMultiple]="true" [nzBeforeUpload]="beforeUpload"
                 (nzChange)="handleUploadEventChange($event)">
        <button nz-button><i nz-icon nzType="upload"></i>Tải ảnh lên</button>
      </nz-upload>
    </div>
  </div>
</nz-card>

<ng-template #title>
  <button nz-button nzType="link" class="go-back" (click)="goBack()">
    <i nz-icon nzType="arrow-left" nzTheme="outline"></i></button>
</ng-template>
<ng-template #buttonGroup>
  <button nz-button nzType="primary" [nzLoading]="isBtnLoading" (click)="isNew ? create() : update()"
          [disabled]="productForm.invalid || productForm.pristine">Lưu</button>
</ng-template>